In the latest commits to the master branch, support has been added for building mongo with gcov flags. You can do this with the following command.

    {code}scons --gcov{code}

Be careful when building on the latest versions of OSX, since the gcc packaged with XCode now is llvm-gcc, which does not have gcov support. Make sure to install regular gcc and pass the correct compiler to scons using the --cxx flag.

Once the code is compiled, you should see a bunch of .gcno files created in the build directory. You can then run any tests you want to run and .gcda files will be created in the build directory. Finally, to generate html, run 

    {code}buildscripts/lcov/runlcov.sh build/path/to/build/dir{code}

Where the first argument is the variant build directory created by scons which now contains the gcda files.

HTML files will now be created in build/html, open build/html/index.html in your web browser to start viewing the coverage data.
